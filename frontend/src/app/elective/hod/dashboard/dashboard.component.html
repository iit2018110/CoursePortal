<nav class="navbar navbar-light bg-light justify-content-between">
    <button type="button" routerLink="admin" class="btn btn-primary m-2" style="visibility: hidden;">Admin Login</button>
    <form class="form-inline">
        <button type="button" class="btn btn-secondary m-2" routerLink="../profile">Profile</button>
        <button type="button" class="btn btn-danger m-2" (click)="_auth.userLogout()">Logout</button>
    </form>
</nav>

<div class=" row container shadow bg-dark  m-5 p-3" style="text-align: center; width: 100%;">
    <div class="col-4 ">
        <button type="button" class=" col-12 btn btn-outline-light" (click)="btnClicked('assign')">Faculty Assign</button>
    </div>
    <div class="col-4 ">
        <button type="button" class="col-12 btn btn-outline-light" (click)="btnClicked('counsel')">Counselling</button>
    </div>
    <div class="col-4 ">
        <button type="button" class="col-12 btn btn-outline-light" (click)="btnClicked('course')">Course Setting</button>
    </div>
</div>

<div class="bg-transparent" style="margin-right: 5%;" *ngIf="facultyassign">
    <div class=" bg-dark  m-5 p-3">
        <h1 style="font-size:xxx-large; color:whitesmoke  ">FACULTY ASSIGN</h1>

        <div class="container " *ngIf="_util.status === 'buffer'">

            <div class="container m-sm-2 shadow-lg p-3">
                <div class="card col-11 text-center">
                    <div class="card-header" style="background-color:black;">
                        <ul class="nav nav-tabs card-header-tabs">
                            <li class="nav-item">
                                <button class="nav-link active" name="assigned" (click)=" menuClicked($event) ">Assigned</button>
                            </li>
                            <li class="nav-item ">
                                <button class="nav-link " name="unassigned" (click)="menuClicked($event) ">Unassigned  </button>
                            </li>

                        </ul>
                    </div>
                    <div class="card-body " style="background-color:white; color: black; ">
                        <div *ngIf="assigned ">
                            <h1>Assigned</h1>
                            <div class="container">
                                <div class="row">
                                    <div class="col-12" *ngFor="let basket of _util.buffer_baskets">
                                        <div class=" shadow  p-4 m-4" style="background-image:url('assets/images/card.jpeg'); background-repeat: no-repeat;
                              background-size:cover;" *ngIf="basket.status === 'assigned'">

                                            <h2>{{basket.name}}</h2>
                                            <div class="row">
                                                <div class="col-4">
                                                    <h2>Subject</h2>
                                                </div>
                                                <div class="col-4">
                                                    <h2>Faculty</h2>
                                                </div>
                                                <div class="col-4">
                                                    <h2>Seat</h2>
                                                </div>
                                            </div>
                                            <div class="row col" *ngFor="let course of basket.courses">
                                                <div class="col-4">
                                                    <p>{{course.name}}</p>
                                                </div>

                                                <div class="col-4">
                                                    <select #selectFaculty class="form-select form-select-sm" aria-label=".form-select-sm example" disabled>
                                              <option value="course.faculty.id" selected>{{course.faculty.name}}</option>
                                          </select>
                                                </div>
                                                <div class="col-4">
                                                    <input type="text" [value]="course.seats" class="form-control" placeholder="Seats" disabled>
                                                </div>
                                            </div>
                                            <button type="button" class="mt-4 btn btn-danger" (click)="onReset(basket.id)">Reset</button>

                                        </div>
                                    </div>
                                </div>

                            </div>
                            <button type="button" class=" col-12 btn btn-dark" (click)="onSubmit()">Submit</button>
                        </div>
                        <div *ngIf="unassigned ">
                            <h1>Unassigned</h1>
                            <div class="row">
                                <div class="col-12" *ngFor="let basket of _util.buffer_baskets">

                                    <div class=" shadow  p-4 m-4" style="background-image:url('assets/images/card.jpeg'); background-repeat: no-repeat;
                          background-size:cover;" *ngIf="basket.status === 'un-assigned'">

                                        <div class="container">
                                            <div class="row">
                                                <div class="col-lg-4">
                                                    <h2>Subject</h2>
                                                </div>
                                                <div class="col-lg-4">
                                                    <h2>Faculty</h2>
                                                </div>
                                                <div class="col-lg-4">
                                                    <h2>Seat</h2>
                                                </div>
                                            </div>
                                        </div>
                                        <form #selectFaculty="ngForm">
                                            <div *ngFor="let course of basket.courses">
                                                <div class="row m-1" [ngModelGroup]="course.id">
                                                    <div class="col-lg-4  ">
                                                        <p style="font-size:medium">{{course.name}}</p>
                                                    </div>
                                                    <div class="col-lg-4 ">
                                                        <select ngModel [name]="'faculty_id'" class="form-control form-select-sm" aria-label=".form-select-sm example">
                                                <option value="">Select Faculty</option>
                                                <option *ngFor="let faculty of getFaculties(course.id)" [ngValue]="faculty.id">
                                                    {{faculty.name}}
                                                </option>
                                              </select>
                                                    </div>
                                                    <div class="col-lg-4">
                                                        <input ngModel [name]="'seats'" type="number" [value]="60" class="form-control" placeholder="default: 60 ">
                                                    </div>
                                                </div>
                                            </div>
                                        </form>
                                        <div class="row">
                                            <button type="button" class=" col-12 mt-3 h-50  btn btn-success" (click)="onCreate(selectFaculty.value)">Move to Assigned</button>

                                        </div>

                                    </div>
                                </div>

                            </div>
                        </div>


                    </div>

                </div>

            </div>

        </div>

        <div *ngIf="_util.status === 'selected'">
            <h1 class="mt-5" style="font-size: xxx-large; font-weight:500; color: aliceblue;">Selected</h1>
            <div class="container">
                <div class="row">
                    <div class="col-6 shadow  p-4 m-4 bg-light" style="color: black;" *ngFor="let basket of _util.selected_baskets">
                        <div class="row">
                            <table class="table">
                                <thead>
                                    <tr>
                                        <th>Course Name</th>
                                        <th>Faculty Name</th>
                                        <th>Course Seat</th>
                                    </tr>
                                </thead>
                                <tbody>
                                    <tr *ngFor="let course of basket.courses">
                                        <td>{{course.name}}</td>
                                        <td>{{course.faculty.name}}</td>
                                        <td>{{course.seats}}</td>
                                    </tr>
                                </tbody>
                            </table>
                        </div>

                    </div>
                </div>
            </div>
        </div>

    </div>


</div>



<div class="bg-transparent" style="margin-right: 5%;" *ngIf="counselling">
    <div class=" bg-dark  m-5 p-3">
        <h1 style="font-size:xxx-large; color:whitesmoke  ">COUNSELLING</h1>

        <div style=" color:black; font-size: large; ">
            <div class="container">

                <div class=" col-12 text-center">
                    <div class="card-body ">

                        <div class="container">
                            <div class="row">
                                <div class="card shadow col-5 p-4 m-4" style="background-image:url('assets/images/card.jpeg'); background-repeat: no-repeat;
                                background-size:cover;" *ngFor="let basket of _util.basket_preferences">
                                    <h2>{{basket.name}}</h2>
                                    <h3 style="color:rgb(0, 0, 138);">Students who had choosen this course.</h3>
                                    <p *ngIf="basket.courses.length === 0" class="text-danger">
                                        **Basket doesnot have any courses **
                                    </p>

                                    <div style="font-size: medium;" *ngFor="let course of basket.courses">
                                        {{course.name}}


                                        <div *ngFor="let student of course.students">
                                            <p>{{student.id}} => {{student.name}}</p>

                                        </div>
                                        <div class="rounded-3 bg-dark text-white" *ngIf="!isEmpty(_util.course_students)">
                                            <h3>Students to whom this course is alloted.</h3>

                                            <div *ngFor="let student of _util.course_students[course.id]">
                                                {{student}}
                                            </div>

                                        </div>

                                    </div>

                                </div>
                            </div>

                        </div>
                    </div>

                </div>
            </div>
        </div>


        <button [hidden]="_util.counselling_status==='submitted'" type="button" class="col-6 btn btn-outline-light" (click)="startCounselling()">Start Counselling</button>
        <button [hidden]="_util.counselling_status==='submitted'" type="button" class="col-6 btn btn-outline-light" (click)="onSubmitCounselling()">Submit</button>

    </div>

</div>

<div class="bg-transparent" style="margin-right: 5%;" *ngIf="coursesetting">
    <div class=" bg-dark  m-5 p-3">
        <h1 style="font-size:xxx-large; color:whitesmoke  ">COURSE SETTING</h1>
        <div style=" color:black; font-size: large; ">
            <div class="container">

                <div class=" col-12 text-center">
                    <div class="card-body ">

                        <div class="container">
                            <div class="row">
                                <div class="card shadow col-5 p-4 m-4" style="background-image:url('assets/images/card.jpeg'); background-repeat: no-repeat;
                              background-size:cover;" *ngFor="let basket of _util.baskets">
                                    <h1>{{basket.name}}</h1>
                                    <div style="font-size: medium;" *ngFor="let course of basket.courses">
                                        <div class="row ">
                                            <div class="col-6">{{course.name}}</div>
                                            <!-- <label class="col-6 switch" style="margin-left:20%; margin-top: 8px">
                                              <input #run type="checkbox"  >
                                              <span class="slider round" ></span>
                                            </label> -->
                                            <div class="col-6">
                                                <div class=""><button [hidden]="course.seats <= 0" type="button" class="m-1 btn btn-sm  btn-danger" (click)="dontRunCourse(basket.id,course.id)"> <i class="fa fa-stop"></i></button></div>
                                                <div class=""><button [hidden]="course.seats > 0" type="button" class="m-1 btn btn-sm  btn-success" (click)="runCourse(basket.id,course.id)">
                                                  <i class="fa fa-play-circle"></i> </button>
                                                </div>
                                            </div>
                                        </div>
                                    </div>

                                </div>
                            </div>

                        </div>
                    </div>

                </div>
            </div>
        </div>






    </div>
</div>
